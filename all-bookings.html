/* ===== Populate Cleaners dropdown when drawer opens ===== */
async function loadCleaners() {
  try {
    const res = await fetchJSON(`${scriptBaseURL}?type=cleaners`);
    const list = Array.isArray(res) ? res : [];
    dwCleaner.innerHTML = list.map(c => `<option value="${c.name}">${c.name}</option>`).join('');
  } catch {
    dwCleaner.innerHTML = '<option value="">(Error loading cleaners)</option>';
  }
}

/* ===== Delete booking ===== */
const dwDelete = document.getElementById('dwDelete');
dwDelete.onclick = async () => {
  if (!CURRENT_EDIT) return;
  if (!confirm('Are you sure you want to delete this booking?')) return;

  try {
    showLoader();
    await fetch(scriptBaseURL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ action: 'deleteBooking', bookingId: dwId.value })
    });
    showToast('Booking deleted');
    await loadBookings();
    closeDrawer();
  } catch (e) {
    console.error(e);
    showToast('Error deleting booking');
  } finally {
    hideLoader();
  }
};

/* ===== When opening drawer, also load cleaners ===== */
function openDrawerWith(bookingId) {
  loadCleaners(); // populate dropdown
  ...
}
